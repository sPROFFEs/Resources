<!doctype html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>parte 2</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>

<body>
  <div class='page'>
    <h1 class='title'>parte 2</h1><br />
    <p>
    <div class="codebox">
      <pre><br /><span style="color:#ad7fa8;font-weight:400">import</span> os<br /><span style="color:#ad7fa8;font-weight:400">import</span> io<br /><span style="color:#ad7fa8;font-weight:400">import</span> re<br /><span style="color:#ad7fa8;font-weight:400">import</span> time<br /><span style="color:#ad7fa8;font-weight:400">import</span> gzip<br /><span style="color:#ad7fa8;font-weight:400">import</span> json<br /><span style="color:#ad7fa8;font-weight:400">import</span> shutil<br /><span style="color:#ad7fa8;font-weight:400">import</span> random<br /><span style="color:#ad7fa8;font-weight:400">import</span> hashlib<br /><span style="color:#ad7fa8;font-weight:400">import</span> warnings<br /><span style="color:#ad7fa8;font-weight:400">import</span> threading<br /><span style="color:#ad7fa8;font-weight:400">import</span> subprocess<br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">sys</span> <span style="color:#ad7fa8;font-weight:400">import</span> executable, stderr<br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">base64</span> <span style="color:#ad7fa8;font-weight:400">import</span> b64decode<br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">json</span> <span style="color:#ad7fa8;font-weight:400">import</span> loads, dumps<br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">zipfile</span> <span style="color:#ad7fa8;font-weight:400">import</span> ZipFile, ZIP_DEFLATED<br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">sqlite3</span> <span style="color:#ad7fa8;font-weight:400">import</span> connect <span style="color:#ad7fa8;font-weight:400">as</span> sql_connect<br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">urllib.request</span> <span style="color:#ad7fa8;font-weight:400">import</span> Request, urlopen<br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">ctypes</span> <span style="color:#ad7fa8;font-weight:400">import</span> windll, wintypes, byref, cdll, Structure, POINTER, c_char, c_buffer<br /><br /><span style="color:#000000;font-weight:700">class</span> <span style="color:#729fcf;font-weight:400">NullWriter</span>(<span style="color:#729fcf;font-weight:400">object</span>):<br />    <span style="color:#000000;font-weight:700">def</span> <span style="color:#729fcf;font-weight:400">write</span>(<span style="color:#729fcf;font-weight:400">self</span>, arg):<br />        <span style="color:#000000;font-weight:700">pass</span><br /><br />warnings.filterwarnings(<span style="color:#edd400;font-weight:400">&quot;ignore&quot;</span>)<br />null_writer = NullWriter()<br />stderr = null_writer<br /><br /><span style="color:#888a85;font-weight:400"># normal python needs to pip pycryptodome but for microsoft store python its Crypto</span><br />ModuleRequirements = [<br />    [<span style="color:#edd400;font-weight:400">&quot;Crypto.Cipher&quot;</span>, <span style="color:#edd400;font-weight:400">&quot;pycryptodome&quot;</span> <span style="color:#000000;font-weight:700">if</span> <span style="color:#000000;font-weight:700">not</span> <span style="color:#edd400;font-weight:400">&#39;PythonSoftwareFoundation&#39;</span> <span style="color:#000000;font-weight:700">in</span> executable <span style="color:#000000;font-weight:700">else</span> <span style="color:#edd400;font-weight:400">&#39;Crypto&#39;</span>]<br />]<br /><span style="color:#000000;font-weight:700">for</span> module <span style="color:#000000;font-weight:700">in</span> ModuleRequirements:<br />    <span style="color:#000000;font-weight:700">try</span>: <br />        <span style="color:#729fcf;font-weight:400">__import__</span>(module[<span style="color:#edd400;font-weight:400">0</span>])<br />    <span style="color:#000000;font-weight:700">except</span>:<br />        subprocess.Popen(f<span style="color:#edd400;font-weight:400">&quot;\&quot;{executable}\&quot; -m pip install {module[1]} --quiet&quot;</span>, shell=<span style="color:#ce5c00;font-weight:400">True</span>)<br />        time.sleep(<span style="color:#edd400;font-weight:400">3</span>)<br /><br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">Crypto.Cipher</span> <span style="color:#ad7fa8;font-weight:400">import</span> AES</pre>
    </div>
    </p>
    <p>
    <ol>
      <h2>1. El código importa varios módulos estándar de Python:</h2>

    </ol>
    <h3></h3>
    </p>
    <p>
    <h3></h3>
    <ul>
      <strong>
        <h3>os, io, re, time, json, random</h3>
      </strong>
      <h3>: Módulos comunes para manejo de archivos, expresiones regulares, tiempo, datos JSON, generación aleatoria,
        entre otros.</h3>

      <strong>
        <h3>gzip, hashlib, shutil, subprocess</h3>
      </strong>
      <h3>: Para trabajar con compresión de archivos, creación de hashes, manejo de archivos, y ejecución de procesos
        del sistema.</h3>

      <strong>
        <h3>threading</h3>
      </strong>
      <h3>: Para manejo de hilos concurrentes.</h3>

      <strong>
        <h3>base64</h3>
      </strong>
      <h3>: Para decodificación de cadenas en base64.</h3>

      <strong>
        <h3>zipfile</h3>
      </strong>
      <h3>: Manejo de archivos ZIP.</h3>

      <strong>
        <h3>sqlite3</h3>
      </strong>
      <h3>: Conectar a bases de datos SQLite.</h3>

      <strong>
        <h3>urllib.request</h3>
      </strong>
      <h3>: Para hacer solicitudes HTTP.</h3>

      <strong>
        <h3>ctypes</h3>
      </strong>
      <h3>: Para interactuar con las librerías de Windows y funciones del sistema operativo (especialmente útil para
        manipular la API de Windows).</h3>

    </ul>
    <h3></h3>
    </p>
    <p>
    <h3></h3>
    <ol>
        <h2>2. Clase NullWriter</h2>
    </ol>
    </p>
    <p></p>
    <p>
    <h3>La clase </h3><code><h3>NullWriter</h3></code>
    <h3> redefine el comportamiento del flujo de salida estándar (stderr). </h3>
    <h3></h3>
    </p>
    <p>
    <h3>En lugar de imprimir mensajes de error en la consola, cualquier intento de escribir en </h3>
    <code><h3>stderr</h3></code>
    <h3> es ignorado por el método </h3><code><h3>write</h3></code>
    <h3> vacío. </h3>
    <h3></h3>
    </p>
    <p>
    <h3>Esto parece un intento de suprimir los errores para evitar que sean visibles.</h3>
    </p>
    <p></p>
    <p>
    <div class="codebox">
      <pre><br />null_writer = NullWriter()<br />stderr = null_writer<br /></pre>
    </div>
    </p>
    <p>
    <ol>
      <h2>3. Filtro de advertencias</h2>

    </ol>
    </p>
    <p></p>
    <p>
    <div class="codebox">
      <pre><br />warnings.filterwarnings(<span style="color:#edd400;font-weight:400">&quot;ignore&quot;</span>)</pre>
    </div>
    </p>
    <p></p>
    <h3>Desactiva cualquier advertencia generada por Python, asegurando que no se impriman advertencias durante la
      ejecución del código.</h3>
    <p>
    <ol>
      <h2>4. Módulos</h2>
      </p>
      <p>

    </ol>
    <div class="codebox">
      <pre><br /><span style="color:#888a85;font-weight:400"># normal python needs to pip pycryptodome but for microsoft store python its Crypto</span><br />ModuleRequirements = [<br />    [<span style="color:#edd400;font-weight:400">&quot;Crypto.Cipher&quot;</span>, <span style="color:#edd400;font-weight:400">&quot;pycryptodome&quot;</span> <span style="color:#000000;font-weight:700">if</span> <span style="color:#000000;font-weight:700">not</span> <span style="color:#edd400;font-weight:400">&#39;PythonSoftwareFoundation&#39;</span> <span style="color:#000000;font-weight:700">in</span> executable <span style="color:#000000;font-weight:700">else</span> <span style="color:#edd400;font-weight:400">&#39;Crypto&#39;</span>]<br />]<br /><span style="color:#000000;font-weight:700">for</span> module <span style="color:#000000;font-weight:700">in</span> ModuleRequirements:<br />    <span style="color:#000000;font-weight:700">try</span>: <br />        <span style="color:#729fcf;font-weight:400">__import__</span>(module[<span style="color:#edd400;font-weight:400">0</span>])<br />    <span style="color:#000000;font-weight:700">except</span>:<br />        subprocess.Popen(f<span style="color:#edd400;font-weight:400">&quot;\&quot;{executable}\&quot; -m pip install {module[1]} --quiet&quot;</span>, shell=<span style="color:#ce5c00;font-weight:400">True</span>)<br />        time.sleep(<span style="color:#edd400;font-weight:400">3</span>)<br />        </pre>
    </div>
    </p>
    <p></p>
    <p>
    <h3>El código configura un arreglo </h3><code><h3>ModuleRequirements</h3></code>
    <h3> que incluye una comprobación para la instalación de librerías externas necesarias, en este caso, </h3>
    <strong><code><h3>pycryptodome o Crypto</h3></code></strong>
    <h3>dependiendo de si Python se instaló desde la Microsoft Store o no.</h3>
    <h3></h3>
    </p>
    <p>
    <h3>La lógica intenta importar el módulo </h3><strong><code><h3>Crypto.Cipher</h3></code></strong>
    <h3>. Si la importación falla, el código utiliza </h3><code><h3>subprocess.Popen</h3></code>
    <h3> para ejecutar un comando en la consola que instala automáticamente el paquete requerido mediante </h3>
    <code><h3>pip</h3></code>
    <h3></h3>
    </p>
    <p>
    <h3></h3>
    <ol>
      <h2>5. Uso de AES</h2>
      </p>
      <p>

    </ol>
    <div class="codebox">
      <pre><br /><span style="color:#ad7fa8;font-weight:400">from</span> <span style="color:#729fcf;font-weight:400">Crypto.Cipher</span> <span style="color:#ad7fa8;font-weight:400">import</span> AES<br /></pre>
    </div>
    </p>
    <p></p>
    <p>
    <h3>El código probablemente se está preparando para manejar datos cifrados. Este es un algoritmo de cifrado
      simétrico que suele usarse para cifrar y descifrar información de manera segura.</h3>
    </p>
  </div>
</body>

</html>