<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Escaneo de hosts</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Escaneo de hosts</h1><br/><p></p><p></p><p><a href="https://nmap.org/book/man-host-discovery.html">https://nmap.org/book/man-host-discovery.html</a></p><p></p><p></p><p><div class="codebox"><pre><br />-sL <span style="color:#000000;font-weight:700">(</span>List scan<span style="color:#000000;font-weight:700">)</span></pre></div></p><p></p><p>Podríamos hacer una resolución DNS reversa para tratar de obtener el nombre de dominio a partir de una dirección IP</p><p></p><p><div class="codebox"><pre><br />-sn <span style="color:#000000;font-weight:700">(</span>No port scan<span style="color:#000000;font-weight:700">)</span></pre></div></p><p></p><p>Esta opción le dice a N MAP que no realice un análisis de puertos después de realizar el host Discovery y que solamente nos saque por pantalla aquellos host que se encuentran disponibles.</p><p></p><p>Esta primera opción sirve para identificar hosts que se encuentran conectados a una red, y nosotros debemos estar también conectados en esa misma red para poder hacer ese descubrimiento.</p><p></p><p>Para escanear la subred donde se encuentran nuestras máquinas.</p><p></p><p><div class="codebox"><pre><br />nmap -sn 192.268.20.0<span style="color:#000000;font-weight:700">/</span>24</pre></div></p><p></p><p><img src="images/96-1.png" alt="images/96-1.png" /></p><p></p><p>Cuando nosotros ejecutamos este comando con privilegios de administración, el funcionamiento de NMAP es diferente.</p><p></p><p>Nosotros lo hemos ejecutado sin privilegios de administración y lo que ha hecho ha sido establecer o tratar de establecer una conexión TCP con una máquina de destino.</p><p>La máquina podría estar levantada, pero no tener servicios corriendo en el puerto 80 en el puerto 4 4:3 y esto quizá podría provocar que pareciese que esta máquina no está funcionando.</p><p></p><p>Si lo ejecutamos como administrador no utiliza el protocolo TCP sino que recurre también al protocolo ARP, que es el que se encarga de asociar la dirección MAC de un dispositivo su dirección IP.</p><p></p><p>Esta técnica con el protocolo ARP es menos intrusiva que mandar peticiones TCP a las máquinas de la subred.</p><p></p><p>A tener en cuenta también que al realizarlo con privilegios de administrador podemos obtener hosts que si están levantados pero no responden a las peticiones TCP.</p><p></p><p></p><p></p><p></p><p></p><p>Tenemos otro tipo de técnicas que podríamos aplicar.</p><p></p><p><div class="codebox"><pre><br />-PS <span style="color:#000000;font-weight:700">(</span>TCP SYN Ping<span style="color:#000000;font-weight:700">)</span></pre></div></p><p></p><p>Esta de aquí que es una de las más populares, probablemente que trata de mandar un paquete TCP SYN vacío.</p><p></p><p><img src="images/96-2.png" alt="images/96-2.png" /></p><p></p><p>No solamente nos está diciendo que este host está levantado, sino que además nos dice de los puertos que tiene ese host cuáles están abiertos.</p><p></p><p>Hay que tener en cuenta que primero comprueba que el host esta activo, pero después  como podemos observar, comienza a hacer un análisis de puertos.</p><p>Es mucho más intrusivo porque genera mucho tráfico de red.</p><p></p><p>Se puede especificar un puerto concreto:</p><p><div class="codebox"><pre><br />nmap -PS 192.168.20.128 -p 80</pre></div></p><p></p><p>Y se puede modificar el al que hace la petición para comprobar si está activo:</p><p><div class="codebox"><pre><br />nmap -PS21 192.168.20.128 -p 80<br />nmap -PS21,22,23 192.168.20.128 -p 80<br /></pre></div></p><p></p><p></p><p></p></div>
</body>
</html>
