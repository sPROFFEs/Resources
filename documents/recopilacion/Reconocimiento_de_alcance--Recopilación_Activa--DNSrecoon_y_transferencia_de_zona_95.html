<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>DNSrecoon y transferencia de zona</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>DNSrecoon y transferencia de zona</h1><br/><p></p><p></p><p>Anteriormente veíamos como consultar datos de forma pasiva sobre diferentes dominios.</p><p>Estas consultas se realizaban en medida al fichero de zona de estos DNS servers pero no eran el fichero como tal.</p><p></p><p>Vamos ver como poder descargar ese fichero de zona en un DNS server mal configurado.</p><p><ul><li>→ <h3>→ Transferencia de zona:</h3></li></ul></p><p></p><p>Es una capacidad que nos proporcionan los DNS server para copiar ese fichero de zona a otro DNS server y no tener que volver a crearlo.</p><p>Esto a veces está mal configurado y nos permite realizar esta transferencia de zona a un DNS server no autorizado.</p><p></p><p></p><p>Vamos a utilizar un dominio de pruebas para ver ese fichero de zonas.</p><p></p><p><a href="https://dnsdumpster.com/">https://dnsdumpster.com/</a></p><p></p><p>Buscamos “zonetransfer.me”</p><p></p><p>Vemos alguna información pero vamos a ver como con el fichero tendremos mucha más información.</p><p></p><p>Existen algunas herramientas de terminal que permiten sacar información como DNS dumpster.</p><p></p><p><div class="codebox"><pre><br /><span style="color:#000000;font-weight:700">sudo</span> apt <span style="color:#000000;font-weight:700">install</span> dnsutils</pre></div></p><p></p><p>Hay varias herramientas como por ejemplo:</p><p></p><p><div class="codebox"><pre><br />nslookup<br /><span style="color:#000000;font-weight:700">set</span> type=ns<br />zonetransfer.me<br /></pre></div></p><p></p><p><img src="images/95-1.png" alt="images/95-1.png" /></p><p></p><p>Podemos comprobar si nos envía el fichero de transferencia de zona:</p><p></p><p><div class="codebox"><pre><br /><span style="color:#000000;font-weight:700">set</span> type=any<br /><span style="color:#000000;font-weight:700">ls</span> -d zonetransfer.me<br /></pre></div></p><p></p><p><img src="images/95-2.png" alt="images/95-2.png" /></p><p></p><p>Dice que el comando no está implementado por que realmente le estamos pidiendo que transfiera este archivo a una máquina host Kali Linux y esto no tendría sentido por motivos de seguridad.</p><p>Esto mismo podemos intentarlo desde una máquina windows y nos saldrá el mismo error,</p><p></p><p>Esto es por el mismo motivo que antes, estamos intentando iniciar una transferencia del fichero hacia ningún sitio porque el host o destino de la transferencia debería ser o está entendido para el DNS server que debe de ser otro DNS server y no cualquier máquina que le haga la petición.</p><p></p><p><div class="codebox"><pre><br /><span style="color:#000000;font-weight:700">set</span> type=any<br />server nsztml.digi.ninja<br /><span style="color:#000000;font-weight:700">ls</span> -d zonetransfer.me<br /></pre></div></p><p></p><p>Una de las cosas interesantes de estos ficheros de zona es que en muchas ocasiones, cuando ese DNS server está compartido entre la red interna y redes externas, podemos también tener algún tipo de configuración de servidores y direcciones internas.</p><p></p><p><img src="images/95-3.png" alt="images/95-3.png" /></p><p></p><p></p><p></p><p>Otra herramienta en Linux DNSrecon:</p><p></p><p><div class="codebox"><pre><br />dnsrecon -d zonetrasfer.me -t axfr</pre></div></p><p></p><p></p></div>
</body>
</html>
